(function(e){function t(t){for(var o,r,c=t[0],i=t[1],l=t[2],p=0,d=[];p<c.length;p++)r=c[p],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],o=!0,c=1;c<s.length;c++){var i=s[c];0!==n[i]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=s[0]))}return e}var o={},n={app:0},a=[];function r(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=o,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(s,o,function(t){return e[t]}.bind(null,o));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0c56":function(e,t,s){},1072:function(e,t,s){e.exports=s.p+"media/loader.2e723c59.mp4"},"28d6":function(e,t,s){},"372f":function(e,t,s){e.exports=s.p+"media/loader.d13a3368.webm"},"4c34":function(e,t,s){e.exports=s.p+"img/vector.7fca0e9a.svg"},"4da0":function(e,t,s){},"4dec":function(e,t,s){"use strict";var o=s("b72e"),n=s.n(o);n.a},5452:function(e,t,s){"use strict";var o=s("af35"),n=s.n(o);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var o=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("Header"),s("Cards",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.showPreloader,expression:"!$store.state.showPreloader"}]}),e.$store.state.closePopUp?e._e():s("Popup"),s("Preloader"),s("Footer",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.showPreloader,expression:"!$store.state.showPreloader"}]})],1)},a=[],r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},c=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"header"},[o("div",{staticClass:"header__bg d-flex justify-content-center align-items-center"},[o("div",{staticClass:"header__logo"},[o("img",{attrs:{src:s("9c0f")}})])])])}],i={name:"Header"},l=i,u=(s("5452"),s("2877")),p=Object(u["a"])(l,r,c,!1,null,null,null),d=p.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cards"},[e._v(" "+e._s(e.numberOfColumns())+" "),s("div",{staticClass:"cards__search search d-flex justify-content-between align-items-center fade-in-up"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchName,expression:"searchName"}],attrs:{type:"text",required:""},domProps:{value:e.searchName},on:{input:[function(t){t.target.composing||(e.searchName=t.target.value)},e.debouncedSearch]}}),s("label",{staticClass:"search__label"},[e._v("Search by name")]),s("i",{staticClass:"fas fa-search"})]),s("div",{staticClass:"cards__wrapper-cards wrapper-cards"},e._l(e.columnsWithItems,(function(t,o){return s("div",{key:o,staticClass:"wrapper-cards__column"},e._l(t,(function(t,o){return s("div",{key:o},[s("div",{staticClass:"wrapper-cards__item-container d-flex justify-content-center align-items-center fade-in-up",on:{click:function(s){return e.onclickCard(t)}}},[s("div",{staticClass:"wrapper-cards__avatar d-flex justify-content-center align-items-center",style:{"background-color":t.color}},[s("span",[e._v(e._s(e.letterOfAvatar(t.name)))])]),s("div",{staticClass:"wrapper-cards__name"},[e._v(e._s(t.name))]),s("span",{staticClass:"wrapper-cards__species"},[e._v("Species")])])])})),0)})),0)])},m=[],h=(s("99af"),s("4de4"),s("13d5"),s("fb6a"),s("b0c0"),s("d3b7"),s("ac1f"),s("25f0"),s("841c"),s("2909")),_=s("5530"),v=s("2f62"),g=s("b012"),b=(s("96cf"),s("1da1")),P=s("bc3a"),w=s.n(P);o["default"].use(v["a"]);var O=new v["a"].Store({state:{showPreloader:!0,build:!1,peoplesPagination:"",searchQuery:"",searchPeoples:[],loading:!1,closePopUp:!0,person:"",searchCount:null},mutations:{SET_LOADED_PEOPLES:function(e,t){e.peoples=t,console.log(e.peoples)},SET_LOADED_PEOPLES_PAGINATION:function(e,t){e.peoplesPagination=t},SET_SEARCH_QUERY:function(e,t){e.searchQuery=t},SET_SEARCH_PEOPLES:function(e,t){e.searchPeoples=t.results,e.searchCount=t.count},RESET_SEARCH_PEOPLES:function(e){e.searchPeoples=null},SET_LOADING:function(e,t){e.loading=t}},actions:{setSearchQuery:function(e,t){var s=e.commit;s("SET_SEARCH_QUERY",t)},search:function(e){var t=e.commit,s=e.state;return Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t("SET_LOADING",!0);try{w.a.get("https://swapi.co/api/people/?search=".concat(s.searchQuery)).then((function(e){t("SET_SEARCH_PEOPLES",e.data),console.log(e)}))}catch(o){t("RESET_SEARCH_PEOPLES")}case 2:case"end":return e.stop()}}),e)})))()},LOAD_PEOPLES:function(e){var t=e.commit;return new Promise((function(e,s){w.a.get("https://swapi.co/api/people/").then((function(s){e(s),t("SET_LOADED_PEOPLES",s.data.results),t("SET_LOADED_PEOPLES_PAGINATION",s.data),t("SET_LOADING",!0)})).catch((function(e){s(e),console.log(e)}))}))},LOAD_PEOPLES_PAGINATION:function(e,t){var s=e.commit,o=t.pagination;return new Promise((function(e,t){w.a.get(o).then((function(t){e(t),s("SET_LOADED_PEOPLES_PAGINATION",t.data)})).catch((function(e){t(e),console.log(e)}))}))}},getters:{getPeoples:function(e){return e.peoples},getPeoplesPagination:function(e){return e.peoplesPagination}}}),E={name:"cards",data:function(){return{post:[],cols:2,width:null,showModal:!1,scrolledToBottom:!0,isLoadingMore:null,moreItems:[],columnsWithItems:[]}},watch:{searchPeoples:function(){""==this.searchName?this.init():this.columns(O.state.searchPeoples)},cols:function(){this.init()}},methods:Object(_["a"])({},Object(v["b"])(["setSearchQuery","search"]),{debouncedSearch:Object(g["debounce"])((function(){this.search()}),500),init:function(){var e=this;this.columnsWithItems=[],O.dispatch("LOAD_PEOPLES").then((function(t){setTimeout((function(){var s;t.data.results&&((s=e.moreItems).push.apply(s,Object(h["a"])(t.data.results)),e.columns(t.data.results))}),300)}),(function(e){console.log(e)}))},letterOfAvatar:function(e){return e.charAt(0)},numberOfColumns:function(){window.innerWidth>=767&&2!=this.cols?(this.cols=2,this.init()):window.innerWidth<767&&1!=this.cols&&(this.cols=1,this.init())},colorOfAvatar:function(e){var t=this;function s(e,t){var s,o=0,n=t.length;while(o<n)s=Math.floor((o+n)/2),e<=t[s].name?n=s:o=s+1;return t[o]&&t[o].name===e?t[o]:-1}return this.post=this.post.concat(e),this.post=this.post.sort((function(e,t){return e.name<t.name?-1:1})).reduce((function(e,t){return e.length&&e[e.length-1].name==t.name||e.push(t),e}),[]),e.filter((function(e){var o=s(e.name,t.post);-1!=o&&(o.colorId?(e.colorId=o.colorId,e.color=o.color):(e.colorId=!0,o.colorId=!0,e.color="#"+("000"+(Math.random()*(1<<24)|0).toString(16)).substr(-6),o.color=e.color,t.post.push(e)))})),e},scroll:function(){var e=this;window.onscroll=function(){var t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)+window.innerHeight===document.documentElement.offsetHeight;t&&!e.searchName&&e.peoplesPagination&&e.scrolledToBottom&&(e.scrolledToBottom=!1,e.isLoadingMore=!0,O.dispatch("LOAD_PEOPLES_PAGINATION",{pagination:e.peoplesPagination.next}).then((function(){setTimeout((function(){var t;O.getters.getPeoplesPagination.results&&((t=e.moreItems).push.apply(t,Object(h["a"])(O.getters.getPeoplesPagination.results)),e.columns(O.getters.getPeoplesPagination.results));e.isLoadingMore=!1,e.scrolledToBottom=!0}),300)}),(function(t){console.log(t),e.isLoadingMore=!1})))}},columns:function(e){if(e){this.searchName&&(this.columnsWithItems=[]);var t=[];console.log(this.cols,"columns");for(var s=[],o=Math.ceil(e.length/this.cols),n=0;n<this.cols;n++)t=this.columnsWithItems.length>0?this.columnsWithItems[n].concat(Object(h["a"])(e).slice(n*o,n*o+o)):this.columnsWithItems.concat(Object(h["a"])(e).slice(n*o,n*o+o)),s.push(this.colorOfAvatar(t));return this.columnsWithItems=s}},onclickCard:function(e){O.state.closePopUp=!1,O.state.person=e}}),mounted:function(){this.numberOfColumns(),this.scroll()},created:function(){var e=this;O.dispatch("LOAD_PEOPLES").then((function(t){setTimeout((function(){var s;t.data.results&&((s=e.moreItems).push.apply(s,Object(h["a"])(t.data.results)),e.columns(t.data.results))}),300)}),(function(e){console.log(e)})).then(setTimeout((function(){O.state.loading&&(O.state.showPreloader=!1)}),2e3)),window.addEventListener("resize",this.numberOfColumns()),this.numberOfColumns()},computed:Object(_["a"])({},Object(v["c"])({peoples:"getPeoples",peoplesPagination:"getPeoplesPagination"}),{},Object(v["d"])(["searchQuery"]),{},Object(v["d"])(["searchPeoples"]),{searchName:{get:function(){return this.searchQuery},set:function(e){return this.setSearchQuery(e)}}}),beforeDestroy:function(){window.removeEventListener("resize",this.numberOfColumns())}},C=E,y=(s("4dec"),Object(u["a"])(C,f,m,!1,null,null,null)),S=y.exports,A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"popup d-flex align-items-center"},[o("div",{staticClass:"popup__card fade-in-up",on:{click:function(t){e.$store.state.closePopUp=!0}}},[e._m(0),e.loadPopup?o("div",{staticClass:"fade-in"},[o("div",{staticClass:"popup__name"},[o("div",{staticClass:"popup__avatar d-flex justify-content-center align-items-center",style:{"background-color":e.$store.state.person.color}},[o("span",[e._v(e._s(e.letterOfAvatar(e.$store.state.person.name)))])]),e._v(" "+e._s(e.$store.state.person.name)+" ")]),o("b-row",{staticClass:"popup__about"},[o("b-col",{attrs:{sm:"12",xl:"6"}},[o("b-row",{staticClass:"popup__row"},[o("b-col",[o("img",{attrs:{src:s("77ab")}}),o("span",{staticClass:"popup__position-name"},[e._v("Birth year")])]),o("b-col",[o("span",{staticClass:"popup__position"},[e._v(e._s(e.$store.state.person.birth_year))])])],1),o("b-row",{staticClass:"popup__row"},[o("b-col",[o("img",{attrs:{src:s("e707")}}),o("span",{staticClass:"popup__position-name"},[e._v("Species")])]),o("b-col",[o("span",{staticClass:"popup__position"},[e._v(e._s(e.species))])])],1),o("b-row",{staticClass:"popup__row"},[o("b-col",[o("img",{attrs:{src:s("878b")}}),o("span",{staticClass:"popup__position-name"},[e._v("Gender")])]),o("b-col",[o("span",{staticClass:"popup__position"},[e._v(e._s(e.$store.state.person.gender))])])],1)],1),o("b-col",[o("b-row",{staticClass:"popup__row"},[o("b-col",[o("img",{attrs:{src:s("eefc")}}),o("span",{staticClass:"popup__position-name"},[e._v("Homeworld")])]),o("b-col",[o("span",{staticClass:"popup__position"},[e._v(e._s(e.homeworld))])])],1),o("b-row",{staticClass:"popup__row"},[o("b-col",[o("img",{attrs:{src:s("b1c4")}}),o("span",{staticClass:"popup__position-name"},[e._v("Films")])]),o("b-col",e._l(e.films,(function(t,s){return o("div",{key:s,staticClass:"popup__position"},[o("span",[e._v(e._s(t))])])})),0)],1)],1)],1)],1):e._e(),e.loadPopup?e._e():o("div",{staticClass:"d-flex justify-content-center align-items-center fade-out"},[o("video",{staticClass:"popup__video",attrs:{autoplay:"",loop:"",muted:"",playsinline:""},domProps:{muted:!0}},[o("source",{attrs:{src:s("1072"),type:"video/mp4"}}),o("source",{attrs:{src:s("5bd4"),type:"video/ogg"}}),o("source",{attrs:{src:s("372f"),type:"video/webm"}})])])])])},x=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("button",{staticClass:"popup__button-close",attrs:{title:"Close (Esc)",type:"button"}},[o("img",{attrs:{src:s("4c34")}})])}],j={name:"popup",data:function(){return{species:null,homeworld:null,films:null,loadPopup:!1}},methods:{letterOfAvatar:function(e){return e.charAt(0)}},mounted:function(){var e=this;this.films=[];for(var t=0;t<O.state.person.films.length;t++)w.a.get(O.state.person.films[t]).then((function(t){e.films.push(t.data.title)}));w.a.all([w.a.get(O.state.person.species),w.a.get(O.state.person.homeworld)]).then((function(t){e.species=t[0].data.name,e.homeworld=t[1].data.name,e.species&&e.homeworld&&e.films&&setTimeout((function(){e.loadPopup=!0}),2e3)}))}},T=j,L=(s("fcef"),Object(u["a"])(T,A,x,!1,null,null,null)),I=L.exports,N=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"preloader fade-out"},[e.$store.state.showPreloader?o("div",{staticClass:"d-flex justify-content-center align-items-center"},[o("video",{staticClass:"preloader__video",attrs:{autoplay:"",loop:"",muted:"",playsinline:""},domProps:{muted:!0}},[o("source",{attrs:{src:s("1072"),type:"video/mp4"}}),o("source",{attrs:{src:s("5bd4"),type:"video/ogg"}}),o("source",{attrs:{src:s("372f"),type:"video/webm"}})])]):e._e()])},$=[],D={name:"preloader"},R=D,k=(s("bdb5"),Object(u["a"])(R,N,$,!1,null,"2cf96623",null)),H=k.exports,M=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},W=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"footer"}},[s("div",{staticClass:"footer__bg d-flex justify-content-center align-items-center"},[s("span",{staticClass:"d-flex text-center"},[e._v("STAR WARS CHARACTER Encyclopedia, 2019")])])])}],Q={name:"Footer"},G=Q,U=(s("898b"),Object(u["a"])(G,M,W,!1,null,"3c8b9439",null)),B=U.exports,F={name:"App",components:{Header:d,Cards:S,Popup:I,Preloader:H,Footer:B}},Y=F,z=(s("5c0b"),Object(u["a"])(Y,n,a,!1,null,null,null)),J=z.exports,q=s("5f5b"),K=s("b1e0"),V=s("487a"),X=s.n(V);s("f9e3"),s("2dd8");o["default"].use(q["a"]),o["default"].use(K["a"]),o["default"].use(X.a),o["default"].config.productionTip=!1,new o["default"]({store:O,render:function(e){return e(J)}}).$mount("#app")},"5bd4":function(e,t,s){e.exports=s.p+"media/loader.e27383c9.ogg"},"5c0b":function(e,t,s){"use strict";var o=s("9c0c"),n=s.n(o);n.a},"77ab":function(e,t,s){e.exports=s.p+"img/birth-icon.63f0c901.svg"},"878b":function(e,t,s){e.exports=s.p+"img/gender-icon.65d3aac9.svg"},"898b":function(e,t,s){"use strict";var o=s("28d6"),n=s.n(o);n.a},"9c0c":function(e,t,s){},"9c0f":function(e,t,s){e.exports=s.p+"img/header__logo.4ceb96c1.png"},af35:function(e,t,s){},b1c4:function(e,t,s){e.exports=s.p+"img/films-icon.33cdf1af.svg"},b72e:function(e,t,s){},bdb5:function(e,t,s){"use strict";var o=s("4da0"),n=s.n(o);n.a},e707:function(e,t,s){e.exports=s.p+"img/species-icon.772f0da5.svg"},eefc:function(e,t,s){e.exports=s.p+"img/homeworld-icon.5102a4cb.svg"},fcef:function(e,t,s){"use strict";var o=s("0c56"),n=s.n(o);n.a}});
//# sourceMappingURL=app.ccca3f60.js.map